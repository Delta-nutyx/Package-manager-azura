#! /bin/bash
# Azura : A cards complement build for manage package from the NCR( Nutyx Community Repository ).
# It's devel by Delta an old member of NuTyX devel team
# Warning this code may be unstable
# The first release will be publish in Azura build community repo 
# This is an testing repo 


# Function help 
function help () {
        echo -e " azura compile : compile a software from its pkgfile "
        echo -e " azura remove : remove the package "
        echo -e " azura info : show the information about the package "
	echo -e "azura sync : a page with some informations about packages available"
}

# Function download database 
function database-sync () {
# Aller dans le répertoire Azura 
	cd ~/Azura
# Si ik n'existe pas, créer le répertoire Azura 
        if [[ $? = 1 ]]
		mkdir ~/Azura
# Telecharger la base de donnée 
	wget -c https://doc-00-64-docstext.googleusercontent.com/export/oijsntiq0rujqv1etq1vpm9n9g/qs4ocl98s19etqe519r4nm8ko8/1612969460000/102757307972229893407/102757307972229893407/1dwCz1UFBhjnrxwuYiEUMUQGnlfNslhX1Bt0FNT9QMPc?format=txt&id=1dwCz1UFBhjnrxwuYiEUMUQGnlfNslhX1Bt0FNT9QMPc&token=AC4w5Vhc3G5s5BcKSZ5UiooX4t51aaUmTQ:1612969424463&ouid=102757307972229893407&includes_info_params=true&inspectorResult=%7B%22pc%22:1,%22lplc%22:11%7D&dat=AJ7Y-hT0uKoZVUp7NPAd4s8H9Mh9uL1H2XoriVrEKbEAe34E3V22FrR-S7n8ON1nhh4weTKf1AB6uY9hGhrB4uieLlQVZXnXZiiSOrM2mGyLhjrMh0NQvmdMguRxCZh9AdvjoXjz26PCnWigH9GWsS-deUQkG_2rcjFROwNG9n3pZMbIl2KuzJINDfBZrk08fOZDfj-yj5YLmxEt_4x8wtoJuSQfDlbMgBZr8VrlJuu3793Osr834WdKOoxVQKciTAO2EQG_hSrmD1OGjC7R9N1P4us-Esf_8Qc5XHmy3aBqddNWI19bpCi5bimkZp-jWmnpGf2cUq75uW52A2zYbFyroIgVUiMTw3mi7N_1b1qqYZOQh1yOfwuyt22m8RH5MU_VgqAI8ahxdDTx-3tAyIGOaad0Knn4dDpwy1x35iJjYc46AoXyqyY_hguAhbebrWSlQsNa_zks85UmAOtJIQZCOoYjGwO1BI-kGV79vSbtp6k7ysbyhFFpWanArKyemBdPQsm5fhdwI-qkeMrMIzKKnHg0bb1b7d-dPrJlY9fU3Fb9k3roFaPOd3Hn-kZ-xEkbbpBHgwtuXBtV0SsQ3sqai2tuPlXsg-zdIsg_9Jbo1KNNcinDXgQXCaYWaCcahxGa3LTs-A6HkqjLRHo-LLdHGXdUe9G6bal2Qz5zag
	echo "Please open the file"

# Add a package from the NCR 
function compile () { 
        echo " Verification of the cards devel utils "
# Ce n'est pas la bonne commande, il faudra vérifier dans le wiki de nutyx 
	cards search cards.devel
	if [[$? = 1]]
		cards install cards.devel 
	fi 
	
        echo " All cards devel programs are installed, start the installation process, please wait "
        read -r -p "Are you sure to want to continue? O/N" reponse
        case ${reponse} in
# Oui 
       [oO][uU][iI]|[oO])
              echo " Please wait few second "
              # Il y aura des trucs avant 
              echo "Done"
              exit 
              ;;
# Nope 
        [nN][oO][nN]|[nN])
               echo "Annulation"
               exit
               ;;
         *)
               echo "Désolé, nous n'avons pas compris"
	       read -r -p "Are you sure to want to continue ? O/N" reponse
	       case ${reponse} in 
	        [oO][uU][iI]|[oO])
              echo " Please wait few second "
              # Il y aura des trucs avant 
              echo "Done"
              exit 
              ;;
        [nN][oO][nN]|[nN])
               echo "Annulation"    
               exit 
                ;;
		    
         *)
               echo "Désolé, nous n'avons pas compris"
	       exit
		

esac                
}
	

# Remove a package 
function remove () {
        echo -e "Wait few second"
        read -r -p "Are you sure to want to continue ? O/N" reponse
        case ${reponse} in
       [oO][uU][iI]|[oO])
              echo -e " Please wait few second "
              exit 
              ;;
        [nN][oO][nN]|[nN])
               echo -e "Annulation"
               exit
               ;;
         *)
               echo "Choix incorrect"
               exit 
                ;;
         
# ferme le case       
esac
}
# Show information about the package 
function info () { 
        echo -e " Please try to read the Azura database, execute this command ...... "
}
# Search a package in the NCR 
function search () { 

}

# Function main 
function main () {
# Si l'user tape compile, lance la commande compile 
        if [ "$OPT_MODE" = "compile" ]; then
               compile 
# Si rien n'est tapé afficher l'aide 
	if [[ $# = 0 ]];then
		help
	fi
	
# Si l'user tape help, affiche l'aide 	       
        if [ "$OPT_MODE" = "help" ]; then
	        help
	fi
	
# Data sync
	
	if [ "$OPT_MODE" = "sync" ]; then
		database-sync
	fi
			
}
# Le main @$ après la fermeture de la fonction sinon elle ne s'arrete pas 
main @$

# End of Azura code.
# Thanks to all the contributors
